## Search API

  - 概述：
    - query是一次请求ES数据信息
    - 一次search包含一个或多个query，匹配query的文档会在hits(搜索结果)中返回
  - Search API:
    
    ![image](https://user-images.githubusercontent.com/46510621/132093996-edfa83fd-55e2-4c4d-a178-b96e6c7c0c2b.png)
    
  - 通用搜索选项：
    - Query DSL: 
      - 支持很多查询类型，包括：
        - Boolean和其他复合查询：基于多个条件组合查询和匹配结果
        - Term-level查询：过滤和查询完全匹配的数据
        - 全文检索
        - 地理和空间查询
    - 聚合：
      - 获取搜索结果的统计数据和其他分析数据
    - 搜索多个数据流和指数：
      - 可以使用逗号分隔的值和grep形式在同一个请求中搜索多个数据流和指数
    - 分页搜索结果：
      - 默认搜索时返回前10个匹配的结果，可以使用from和size参数分页比较大的结果集
        - from参数指定忽略的命中数
        - size参数定义返回的最大命中数
    - 获取选择的属性：
      - 默认搜索结果中的每个hit包含文档的_source，可以通过一下2种方式从查询中获取选择的属性：
        - 使用fields选项取出索引映射中的属性值
        - 使用_source选项获取在索引时间传递的原始值
    - 排序搜索结果：
      - 默认搜索结果的命中文档通过_score（表示文档和查询语句的匹配程度）排序
  - 追踪所有的命中文档：
    - track_total_hits参数可以控制被追踪的总命中文档数
      - 当设置为true时，搜索响应会追踪匹配查询数量的命中文档
      - 当设置为整数时，指定命中文档的数量：
        ![image](https://user-images.githubusercontent.com/46510621/132099600-31a4da3b-52d3-4405-b34c-59727edf9844.png)
        
  - 过滤搜索结果：
    - 有2种方式可以过滤搜索结果：
      - 使用带filter子句的布尔查询条件，搜索请求会将布尔过滤应用到搜索命中和聚合中
      - 使用搜索API的post_filter参数，搜索请求会将post过滤应用到搜索命中，不包括聚合
