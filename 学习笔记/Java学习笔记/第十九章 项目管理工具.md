# 项目管理工具

## Apache Maven

  - 简介：
    - Maven是一个软件项目管理和理解工具，基于项目对象模型（project object model, POM）的概念，Maven可以管理项目的构建，报告和文档
    - Maven的目标：
      - 使构建过程变得简单：
      - 提供统一的构建系统：
        - Maven使用POM和一系列插件构建系统
      - 提供高质量的项目信息：
        - 直接从源码管理中创建的修改日志
        - 相互引用的源码
        - 项目使用的依赖
        - 单元测试报告，包括覆盖率
      - 鼓励更好的开发实践：
    - Maven的特点：
      - 遵循最佳实践的简单项目设置
      - 在所有项目中保持一致的使用方式
      - 优秀的依赖管理能力，包括：自动更新，依赖闭包（也称为传递依赖关系）
      - 能够方便地同时处理多个项目
      - 一个庞大的且不断增长的类库和源数据的仓库支持开箱即用
      - 可扩展，可以轻松地扩展插件和脚本
      - 只需要很少的额外配置就可以使用新功能
      - 基于模型的构建：Maven可以将任意数量的项目构建为预定义的输出类型，例如：JAR, WAR等
      - 生成项目信息的网址或PDF
      - 发布管理：不需要额外的配置，Maven就可以集成源码管理系统（例如Subversion or Git），并且管理项目的发布，也支持将项目发布到分布式的位置供其他项目使用
      - 依赖管理：Maven支持从项目从中央仓库下载所需要的依赖，这样做可以在不同的项目中共用JARs，并确保项目之间的向后兼容性
  - Maven插件：
    - Maven本质上是一个插件执行框架，所有工作都是由插件完成。
    - 主要有两类插件：构建插件和报告插件
      - 构建插件：在构建过程中执行，在POM文件的<build/>元素中配置
      - 报告插件：在生成网址时执行，在POM文件的<reporting/>元素中配置
    - 核心插件：
      | Plugin        | Type*         | Description   |
      | ------------- | ------------- | ------------- |
      | clean         | B             | Clean up after the build |
      | compiler      | B             | Compiles Java sources |
      | deploy        | B             | Deploy the built artifact to the remote repository |
      | failsafe      | B             | Run the JUnit integration tests in an isolated classloader |
      | install       | B             | Install the built artifact into the local repository |
      | resources     | B             | Copy the resources to the output directory for including in the JAR |
      | site          | B             | Generate a site for the current project |
      | surefire      | B             | Run the JUnit unit tests in an isolated classloader |
      | verifier      | B             | Useful for integration tests - verifies the existence of certain conditions |
    - 打包插件：
      | Plugin        | Type*         | Description   |
      | ------------- | ------------- | ------------- |
      | jar           | B             | Build a JAR from the current project |
      | rar           | B             | Build a RAR from the current project |
      | war           | B             | Build a WAR from the current project |
      | source        | B             | Build a source-JAR from the current project |
    - 报告插件：
      | Plugin        | Type*         | Description   |
      | ------------- | ------------- | ------------- |
      | changelog     | R             | Generate a list of recent changes from your SCM |
      | changes       | B+R           | Generate a report from an issue tracker or a change document |
      | javadoc       | B+R           | Generate Javadoc for the project |
      | project-info-reports       | R             | Generate standard project reports |
      | surefire-report      | R             | Generate a report based on the results of unit tests |
    - 工具：
      | Plugin        | Type*         | Description   |
      | ------------- | ------------- | ------------- |
      | artifact      | B             | Manage artifacts tasks like buildinfo |
      | archetype     | B             | Generate a skeleton project structure from an archetype |
      | assembly      | B             | Build an assembly (distribution) of sources and/or binaries |
      | dependency    | B+R           | Dependency manipulation (copy, unpack) and analysis |
      | help          | B             | Get information about the working environment for the project |
      | invoker       | B+R           | Run a set of Maven projects and verify the output |
      | pdf           | B             | Generate a PDF version of your project's documentation |
      | plugin        | B+R           | Create a Maven plugin descriptor for any mojos found in the source tree, to include in the JAR |
      | release       | B             | Release the current project - updating the POM and tagging in the SCM |
      | remote-resources       | B             | Copy remote resources to the output directory for inclusion in the artifact |
  - 构建的生命周期：
    - 构建的生命周期是由不同的构建阶段组成，这些阶段按顺序执行
    - Clean生命周期：
      | Phase         | Description   | 
      | ------------- | ------------- |
      | pre-clean     | execute processes needed prior to the actual project cleaning     |
      | clean         | remove all files generated by the previous build     |
      | post-clean    | execute processes needed to finalize the project cleaning     |
    - Default生命周期：
      | Phase         | Description   | 
      | ------------- | ------------- |
      | validate      | validate the project is correct and all necessary information is available     |
      | compile       | compile the source code of the project     |
      | test          | run tests using a suitable unit testing framework. These tests should not require the code be packaged or deployed     |
      | package       | take the compiled code and package it in its distributable format, such as a JAR     |
      | verify        | run any checks to verify the package is valid and meets quality criteria     |
      | install       | install the package into the local repository, for use as a dependency in other projects locally     |
      | deploy        | done in an integration or release environment, copies the final package to the remote repository for sharing with other developers and projects     |
    - Site生命周期：
      | Phase         | Description   | 
      | ------------- | ------------- |
      | pre-site      | execute processes needed prior to the actual project site generation     |
      | site          | generate the project's site documentation     |
      | post-site     | execute processes needed to finalize the site generation, and to prepare for site deployment     |
      | site-deploy   | deploy the generated site documentation to the specified web server     |
  - POM:
    - 概述：
      - POM是一个包含项目信息和用于构建项目的配置信息的XML文件，当执行任务或目标时，Maven会寻找当前目录的POM文件，读取需要的配置信息，然后执行goal
      - 可以在POM文件中指定的配置包括：依赖，插件，执行的goal，构建的配置，项目的版本和描述等
    - Super POM:
      - Maven默认的POM文件，所有的POM文件默认是继承Super POM
    - Minimal POM:
      - POM文件的最小要求：
      
        <img width="457" alt="image" src="https://user-images.githubusercontent.com/46510621/147208745-a38e97a6-ba0f-4a5f-8533-ccf801dba888.png">
        
        - 示例：
          ```
          <project>
            <modelVersion>4.0.0</modelVersion>
            <groupId>com.mycompany.app</groupId>
            <artifactId>my-app</artifactId>
            <version>1</version>
          </project>
          ```
        - 其中groupId, artifactId, and version构成了项目的全限定名称，形式为：<groupId>:<artifactId>:<version>
    - 项目继承：
      - 示例：
        ```
        <project>
          <modelVersion>4.0.0</modelVersion>
          <parent>
            <groupId>com.mycompany.app</groupId>
            <artifactId>my-app</artifactId>
            <version>1</version>
          </parent>

          <artifactId>my-module</artifactId>
        </project>
        ```
    - 项目集成：
      - 通过在parent POM文件中指定模块，父项目可以知道它的模块。当父项目执行命令的时候，也会在子模块执行
      - 示例：
        ```
        <project>
          <modelVersion>4.0.0</modelVersion>
          <groupId>com.mycompany.app</groupId>
          <artifactId>my-app</artifactId>
          <version>1</version>
          <packaging>pom</packaging>

          <modules>
            <module>my-module</module>
          </modules>
        </project>
        ```
    - 项目继承和项目集成的关系：
      - 如果几个Maven项目有相似的配置，可以将相似的配置抽取出来形成一个父项目，然后让这些Maven项目继承父项目
      - 如果有一组项目同时构建和处理，可以创建一个父项目，并在父项目中声明这组项目作为子模块
      - 需要遵循的3条规则：
        - 在每个子POM文件中指定parent POM
        - 修改parent POM打包为pom
          ```
          <packaging>pom</packaging>
          ```
        - 在parent POM中指定子模块
    - 项目插值和变量：
      - 声明变量为一个property，在POM文件的其他地方可以引用
        ```
        <project>
          ...
          <properties>
            <mavenVersion>3.0</mavenVersion>
          </properties>

          <dependencies>
            <dependency>
              <groupId>org.apache.maven</groupId>
              <artifactId>maven-artifact</artifactId>
              <version>${mavenVersion}</version>
            </dependency>
            <dependency>
              <groupId>org.apache.maven</groupId>
              <artifactId>maven-core</artifactId>
              <version>${mavenVersion}</version>
            </dependency>
          </dependencies>
          ...
        </project>
        ```
  - 构建配置：
    - 不同类型的配置：
      - 项目级别：pom.xml
      - 用户级别：Maven-settings (%USER_HOME%/.m2/settings.xml)
      - 全局：global Maven-settings (${maven.home}/conf/settings.xml)
    - 配置激活方式：
      - 命令行: 通过-P命令行参数
        ```
        mvn groupId:artifactId:goal -P profile-1,profile-2
        ```
      - Maven settings：通过<activeProfiles>中元素指定
        ```
        <settings>
          ...
          <activeProfiles>
            <activeProfile>profile-1</activeProfile>
          </activeProfiles>
          ...
        </settings>
        ```
      - 环境变量
      - OS settings
    - POM文件中可以配置的元素：
      - 直接配置的元素：
        ```
        <repositories>, <pluginRepositories>, <dependencies>, <plugins>, <properties>, <modules>, <reports>, <reporting>, <dependencyManagement>, <distributionManagement>
        ```
      - build元素中配置的元素：
        ```
        <resources>, <testResources>, <directory>, <finalName>, <filters>, <pluginManagement>, <plugins>
        ```
  - 标准目录结构：
    <img width="895" alt="image" src="https://user-images.githubusercontent.com/46510621/147648291-379b0b3a-24e4-4444-9a66-7cb166f7fa7b.png">
  - 依赖管理：
    - 依赖传递: 
      - 通过自动包含传递的依赖，避免去指定自己所需要的依赖
      - 可以被聚集的依赖的层级数没有限制，当出现循环依赖时会出现问题
      - 因为依赖传递，包含的依赖图会迅速的增长，因此会有额外的功能限制包含的依赖：
        - 依赖中介：当同一个依赖有多个版本时决定使用哪个版本的artifact，Maven会选择依赖树中距离最近的依赖的版本
        - 依赖管理：可以直接指定使用依赖的版本
        - 依赖作用域：指定依赖包含在哪个项目构建的阶段
          - compile: 默认的作用域，编译类路径上的依赖，并且这些依赖可以传播到依赖的项目
          - provided: 类似于compile，但是声明让JDK或容器在运行时提供这个依赖。在编译和测试时这个依赖会加到类路径
          - runtime: 表明这个依赖用于运行时，不用于编译。在运行和测试时这个依赖会加到类路径
          - test: 表明依赖只用于测试编译和运行阶段
          - system: 类似于provided，表明依赖一值存在，不用去仓库中寻找
          - import: 只在dependencyManagement元素中使用，表明这个依赖会被dependencyManagement元素中指定的依赖替换
        - 排除的依赖：使用exclusion元素可以排除指定的依赖
 
## Git
    
  - 概述：
    - 版本控制：
      - 版本控制是系统可以记录对文件的修改，便于在之后的时间选取某个特定的版本。
      - 中心化的版本控制系统：
        - 一个独立的服务器包含所有版本的文件，所有客户端从中心服务器获取文件
          <img width="699" alt="image" src="https://user-images.githubusercontent.com/46510621/147732523-4ab1a071-32e2-434a-9129-d20e079f747e.png">
        
        - 优缺点：
          - 优点：
            - 每个人都知道项目中的其他人在做什么
            - 管理员可以控制每个人的权限
          - 缺点：
            - 单点失败，所有数据可能会丢失
      - 分布式版本控制系统：
        - 可以生成仓库的一个完整镜像，包含操作历史，每次克隆是对所有数据的备份。如果任何服务器失效，可以从客户端的仓库中进行恢复
    - Git：
      - Git和其他版本控制系统的区别：
        - 其他版本控制系统存储一系列的文件，以及这些文件的改动
          <img width="701" alt="image" src="https://user-images.githubusercontent.com/46510621/147733902-e70efdb7-d82b-4562-bf67-b76c38aad19b.png">
        
        - Git把数据作为快照：每次提交或保存项目状态，会生成这一时刻文件的快照，并保存一个引用指向这个快照。如果文件没有修改，Git不会再次存储这个文件，而是引用到之前保存的那个文件
          <img width="692" alt="image" src="https://user-images.githubusercontent.com/46510621/147734352-fddf2bc9-9c11-45bd-b3f1-90ce74d4310e.png">

      - 数据完整性：
        - 在数据保存之前Git会使用SHA-1哈希做checksum校验，并且存储在数据库时不是通过名称，而是内容的哈希值
        
          
        
        
      
