## 运行时栈帧结构

  - Java虚拟机以方法作为最基本的执行单元，栈帧则是用于支持虚拟机进行方法调用和方法执行背后的数据结构，它也是虚拟机运行时数据区中的虚拟机栈的栈元素
  - 每一个栈帧都包括了局部变量表、操作数栈、动态连接、方法返回地址和一些额外的附加信息
  
    <img width="546" alt="image" src="https://user-images.githubusercontent.com/46510621/159122110-04b40c6e-035a-4da9-b91e-7be6bf7439ac.png">

    - 局部变量表：
      - 是一组变量值的存储空间，用于存放方法参数和方法内部定义的局部变量
      - 局部变量表的容量以变量槽(Variable Slot)为最小单位，每个变量槽都应该能存放一个boolean、byte、char、short、int、float、reference或returnAddress类型的数据
    - 操作数栈：
      - 是一个后入先出栈，操作数栈的每一个元素都可以是包括long和double在内的任意Java数据类型。32位数据类型所占的栈容量为1，64位数据类型所占的栈容量为2
      - 当一个方法刚刚开始执行的时候，这个方法的操作数栈是空的，在方法的执行过程中，会有各种字节码指令往操作数栈中写入和提取内容，也就是出栈和入栈操作。譬如在做算术运算的时候是通过将运算涉及的操作数栈压入栈顶后调用运算指令来进行的，又譬如在调用其他方法的时候是通过操作数栈来进行方法参数的传递
    - 动态连接：
      - 每个栈帧都包含一个指向运行时常量池中该栈帧所属方法的引用，持有这个引用是为了支持方法调用过程中的动态连接
    - 方法返回地址：
      - 方法正常退出时，栈帧中很可能会保存主调方法的PC计数器。而方法异常退出时，返回地址是要通过异常处理器表来确定的，栈帧中就一般不会保存这部分信息
    - 附加信息：
      - 《Java虚拟机规范》允许虚拟机实现增加一些规范里没有描述的信息到栈帧之中，例如与调试、性能收集相关的信息
