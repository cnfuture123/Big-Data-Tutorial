## 类加载过程

  - 类加载的整个生命周期将会经历加载、验证、准备、解析、初始化、使用和卸载七个阶段
  
    <img width="1034" alt="image" src="https://user-images.githubusercontent.com/46510621/159116902-caad3572-3ffc-417f-a9cf-05b774f36f3a.png">

    - 加载：
      - 通过一个类的全限定名来获取定义此类的二进制字节流
      - 将这个字节流所代表的静态存储结构转化为方法区的运行时数据结构
      - 在内存中生成一个代表这个类的java.lang.Class对象，作为方法区这个类的各种数据的访问入口
    - 验证：
      - 验证是连接阶段的第一步，这一阶段的目的是确保Class文件的字节流中包含的信息符合《Java虚拟机规范》的全部约束要求，保证这些信息被当作代码运行后不会危害虚拟机自身的安全
    - 准备：
      - 准备阶段是正式为类中定义的变量(即静态变量，被static修饰的变量)分配内存并设置类变量初始值的阶段，这时候进行内存分配的仅包括类变量，而不包括实例变量，实例变量将会在对象实例化时随着对象一起分配在Java堆中
    - 解析：
      - 解析阶段是Java虚拟机将常量池内的符号引用替换为直接引用的过程，对方法或者字段的访问，也会在解析阶段中对它们的可访问性进行检查
    - 初始化：
      - 类的初始化阶段是类加载过程的最后一个步骤，直到初始化阶段，Java虚拟机才真正开始执行类中编写的Java程序代码，将主导权移交给应用程序
      - 进行准备阶段时，变量已经赋过一次系统要求的初始零值，而在初始化阶段，则会根据程序员通过程序编码制定的主观计划去初始化类变量和其他资源

## 双亲委派模型

  - 3个系统提供的类加载器：
    - 启动类加载器：负责加载存放在 <JAVA_HOME>\lib目录，或者被-Xbootclasspath参数所指定的路径中存放的，而且是Java虚拟机能够识别的类库加载到虚拟机的内存中
    - 扩展类加载器：负责加载<JAVA_HOM E>\lib\ext目录中，或者被java.ext.dirs系统变量所指定的路径中所有的类库
    - 应用程序类加载器：负责加载用户类路径 (ClassPath)上所有的类库
  - 双亲委派模型的工作过程是: 如果一个类加载器收到了类加载的请求，它首先不会自己去尝试加载这个类，而是把这个请求委派给父类加载器去完成，每一个层次的类加载器都是如此，因此所有的加载请求最终都应该传送到最顶层的启动类加载器中，只有当父加载器反馈自己无法完成这个加载请求(它的搜索范围中没有找到所需的类)时，子加载器才会尝试自己去完成加载
    - 示意图：
      
      <img width="558" alt="image" src="https://user-images.githubusercontent.com/46510621/159120983-104238d4-54b9-4266-aa02-7ffef592ccc4.png">

